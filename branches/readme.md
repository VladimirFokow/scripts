# `branches`

- see for each branch of the current repo, is it up to date with origin, or behind.

Can be interesting to run this command after `git fetch`, to see which branches are now behind.

Example:
```
>>> branches
âœ… branch1   - up to date with origin/branch1
ðŸ”¸ branch2   - isn't checked out locally
âœ… main      - up to date with origin/main

>>> git fetch  # downloads all commits to all branches, but doesn't move any pointers (doesn't merge the new commits onto any branches)

>>> branches
ðŸ”» branch1   - behind origin/branch1
ðŸ”¸ branch2   - isn't checked out locally
âœ… main      - up to date with origin/main

```


---

## (for the curious ones: this is how the code works)

(generated by AI, edited by me)


`git fetch --all > /dev/null 2>&1`

- `dev/null` discards all the data written to it
- `2>&1` redirects stderr to stdout which is redirected to /dev/null

`echo -e "\033[0;31m$2\033[0m" ;;` - colors the printed stuff in terminal (which is the input to the colorize function) in red
 

`[ -d .git ] || git rev-parse --is-inside-work-tree > /dev/null 2>&1;`

- `[ -d .git ]` - if the directory .git exists in current folder
- `||` - or
- `git rev-parse --is-inside-work-tree > /dev/null 2>&1` - if the current directory is inside a Git working tree. It returns "true" if the current directory is part of a Git repository
- `> /dev/null 2>&1` portion of the command is used to redirect both standard output (stdout) and standard error (stderr) to the null device /dev/null. This effectively discards any output or error messages generated by the command, as the redirection sends them to a "black hole."

`$(git branch -r | grep -v '\->' | tr -d ' ');`

- `git branch -r` - list all remote branches
- `grep -v '\->'` - exclude the current branch
- `tr -d ' '` - remove spaces

`branch="${remote#origin/}"` - remove the prefix "origin/" from the value of the variable remote and assign the result to the variable branch.

- "#" symbol is a parameter expansion operator that performs pattern matching and removal of a specified prefix from the value of a variable. 

`git show-ref --verify --quiet refs/heads/$branch` - verify if a local branch exists in a Git repository. 

- `--verify` - verify that the object exists
- `--quiet` - do not output any results to stdout
- `refs/heads/$branch` - the reference to be checked
- If the branch reference exists locally, the command will exit silently with a zero exit status (success). If the branch reference does not exist, the command will exit silently with a non-zero exit status (failure).

`$(git rev-parse $branch)` - get the SHA-1 of the last commit on the branch

